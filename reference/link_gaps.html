<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Link gaps to (ESM) data — link_gaps • mpathsenser</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Link gaps to (ESM) data — link_gaps"><meta name="description" content="
Gaps in mobile sensing data typically occur when the app is stopped by the operating system or
the user. While small gaps may not pose problems with analyses, greater gaps may cause bias or
skew your data. As a result, gap data should be considered in order to inspect and limit their
influence. This function, analogous to link(), allows you to connect gaps to other data
(usually ESM/EMA data) within a user-specified time range."><meta property="og:description" content="
Gaps in mobile sensing data typically occur when the app is stopped by the operating system or
the user. While small gaps may not pose problems with analyses, greater gaps may cause bias or
skew your data. As a result, gap data should be considered in order to inspect and limit their
influence. This function, analogous to link(), allows you to connect gaps to other data
(usually ESM/EMA data) within a user-specified time range."><meta property="og:image" content="https://koenniem.github.io/mpathsenser/logo.png"><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mpathsenser</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.2.4.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/mpathsenser.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/data-overview.html">Data overview</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://cloud.r-project.org/package=mpathsenser" aria-label="View on CRAN"><span class="fa fab fa-r-project"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/koenniem/mpathsenser" aria-label="Github"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Link gaps to (ESM) data</h1>
      <small class="dont-index">Source: <a href="https://github.com/koenniem/mpathsenser/tree/master/R/linking.R" class="external-link"><code>R/linking.R</code></a></small>
      <div class="d-none name"><code>link_gaps.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable" class="external-link"><img src="figures/lifecycle-stable.svg" alt="[Stable]"></a></p>
<p>Gaps in mobile sensing data typically occur when the app is stopped by the operating system or
the user. While small gaps may not pose problems with analyses, greater gaps may cause bias or
skew your data. As a result, gap data should be considered in order to inspect and limit their
influence. This function, analogous to <code><a href="link.html">link()</a></code>, allows you to connect gaps to other data
(usually ESM/EMA data) within a user-specified time range.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">link_gaps</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">gaps</span>,</span>
<span>  by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  offset_before <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  offset_after <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  raw_data <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data frame or an extension to a data frame (e.g. a tibble). While gap data can be
linked to any other type of data, ESM data is most commonly used.</p></dd>


<dt id="arg-gaps">gaps<a class="anchor" aria-label="anchor" href="#arg-gaps"></a></dt>
<dd><p>A data frame (extension) containing the gap data. See <code><a href="identify_gaps.html">identify_gaps()</a></code> for
retrieving gap data from an mpathsenser database. It should at least contain the columns <code>from</code>
and <code>to</code> (both in a date-time format), as well as any specified columns in <code>by</code>.</p></dd>


<dt id="arg-by">by<a class="anchor" aria-label="anchor" href="#arg-by"></a></dt>
<dd><p>A character vector indicating the variable(s) to match by, typically the participant
IDs. If NULL, the default, <code>*_join()</code> will perform a natural join, using all variables in
common across <code>x</code> and <code>y</code>. Therefore, all data will be mapped to each other based on the time
stamps of <code>x</code> and <code>y</code>. A message lists the variables so that you can check they're correct;
suppress the message by supplying by explicitly.</p>
<p>To join by different variables on <code>x</code> and <code>y</code>, use a named vector. For example, <code>by = c('a' = 'b')</code> will match <code>x$a</code> to <code>y$b</code>.</p>
<p>To join by multiple variables, use a vector with <code>length &gt; 1</code>. For example, <code>by = c('a', 'b')</code>
will match <code>x$a</code> to <code>y$a</code> and <code>x$b</code> to <code>y$b</code>. Use a named vector to match different variables
in <code>x</code> and <code>y</code>. For example, <code>by = c('a' = 'b', 'c' = 'd')</code> will match <code>x$a</code> to <code>y$b</code> and <code>x$c</code>
to <code>y$d</code>.</p>
<p>To perform a cross-join (when <code>x</code> and <code>y</code> have no variables in common), use <code>by = character()</code>.
Note that the <code>split</code> argument will then be set to 1.</p></dd>


<dt id="arg-offset-before">offset_before<a class="anchor" aria-label="anchor" href="#arg-offset-before"></a></dt>
<dd><p>The time before each measurement in <code>x</code> that denotes the period in which <code>y</code>
is matched. Must be convertible to a period by <code><a href="https://lubridate.tidyverse.org/reference/as.period.html" class="external-link">lubridate::as.period()</a></code>.</p></dd>


<dt id="arg-offset-after">offset_after<a class="anchor" aria-label="anchor" href="#arg-offset-after"></a></dt>
<dd><p>The time after each measurement in <code>x</code> that denotes the period in which <code>y</code>
is matched. Must be convertible to a period by <code><a href="https://lubridate.tidyverse.org/reference/as.period.html" class="external-link">lubridate::as.period()</a></code>.</p></dd>


<dt id="arg-raw-data">raw_data<a class="anchor" aria-label="anchor" href="#arg-raw-data"></a></dt>
<dd><p>Whether to include the raw data (i.e. the matched gap data) to the output as
gap_data.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The original <code>data</code> with an extra column <code>duration</code> indicating the gap during within the
interval in seconds (if <code>duration</code>  is <code>TRUE</code>), or an extra column called <code>gap_data</code> containing
the gaps within the interval. The function ensures all durations and gap time stamps are within
the range of the interval.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="bin_data.html">bin_data()</a></code> for linking two sets of intervals to each other; <code><a href="identify_gaps.html">identify_gaps()</a></code> for
finding gaps in the sampling; <code><a href="add_gaps.html">add_gaps()</a></code> for adding gaps to sensor data;</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Create some data</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.POSIXt.html" class="external-link">seq.POSIXt</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="st">"2021-11-14 13:00:00"</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">"1 hour"</span>, length.out <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  participant_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"12345"</span>, <span class="fl">3</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"23456"</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  item_one <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">40</span>, <span class="fl">50</span>, <span class="fl">60</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create some gaps</span></span></span>
<span class="r-in"><span><span class="va">gaps</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2021-11-14 13:00:00"</span>, <span class="st">"2021-11-14 14:00:00"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2021-11-14 13:30:00"</span>, <span class="st">"2021-11-14 14:30:00"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  participant_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"12345"</span>, <span class="st">"23456"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Link the gaps to the data</span></span></span>
<span class="r-in"><span><span class="fu">link_gaps</span><span class="op">(</span><span class="va">x</span>, <span class="va">gaps</span>, by <span class="op">=</span> <span class="st">"participant_id"</span>, offset_before <span class="op">=</span> <span class="fl">0</span>, offset_after <span class="op">=</span> <span class="fl">1800</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 6 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   time                participant_id item_one   gap</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> 2021-11-14 <span style="color: #949494;">13:00:00</span> 12345                40  <span style="text-decoration: underline;">1</span>800</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> 2021-11-14 <span style="color: #949494;">14:00:00</span> 12345                50     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> 2021-11-14 <span style="color: #949494;">15:00:00</span> 12345                60     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> 2021-11-14 <span style="color: #949494;">13:00:00</span> 23456                40     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> 2021-11-14 <span style="color: #949494;">14:00:00</span> 23456                50  <span style="text-decoration: underline;">1</span>800</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> 2021-11-14 <span style="color: #949494;">15:00:00</span> 23456                60     0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Link the gaps to the data and include the raw data</span></span></span>
<span class="r-in"><span><span class="fu">link_gaps</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">x</span>,</span></span>
<span class="r-in"><span>  <span class="va">gaps</span>,</span></span>
<span class="r-in"><span>  by <span class="op">=</span> <span class="st">"participant_id"</span>,</span></span>
<span class="r-in"><span>  offset_before <span class="op">=</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span>  offset_after <span class="op">=</span> <span class="fl">1800</span>,</span></span>
<span class="r-in"><span>  raw_data <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 6 × 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   time                participant_id item_one gap_data           gap</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> 2021-11-14 <span style="color: #949494;">13:00:00</span> 12345                40 <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span>  <span style="text-decoration: underline;">1</span>800</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> 2021-11-14 <span style="color: #949494;">14:00:00</span> 12345                50 <span style="color: #949494;">&lt;tibble [0 × 3]&gt;</span>     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> 2021-11-14 <span style="color: #949494;">15:00:00</span> 12345                60 <span style="color: #949494;">&lt;tibble [0 × 3]&gt;</span>     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> 2021-11-14 <span style="color: #949494;">13:00:00</span> 23456                40 <span style="color: #949494;">&lt;tibble [0 × 3]&gt;</span>     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> 2021-11-14 <span style="color: #949494;">14:00:00</span> 23456                50 <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span>  <span style="text-decoration: underline;">1</span>800</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> 2021-11-14 <span style="color: #949494;">15:00:00</span> 23456                60 <span style="color: #949494;">&lt;tibble [0 × 3]&gt;</span>     0</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://ppw.kuleuven.be/okp/team/Koen_Niemeijer/" class="external-link">Koen Niemeijer</a>, KU Leuven.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

