<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Process and Analyse Data from m-Path Sense • mpathsenser</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" sizes="any" href="favicon.ico">
<link rel="manifest" href="site.webmanifest">
<script src="lightswitch.js"></script><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet">
<meta property="og:title" content="Process and Analyse Data from m-Path Sense">
<meta name="description" content="Overcomes one of the major challenges in mobile (passive) sensing, namely being able to pre-process the raw data that comes from a mobile sensing app, specifically m-Path Sense &lt;https://m-path.io&gt;. The main task of mpathsenser is therefore to read m-Path Sense JSON files into a database and provide several convenience functions to aid in data processing.">
<meta property="og:description" content="Overcomes one of the major challenges in mobile (passive) sensing, namely being able to pre-process the raw data that comes from a mobile sensing app, specifically m-Path Sense &lt;https://m-path.io&gt;. The main task of mpathsenser is therefore to read m-Path Sense JSON files into a database and provide several convenience functions to aid in data processing.">
<meta property="og:image" content="https://koenniem.github.io/mpathsenser/logo.png">
<meta name="robots" content="noindex">
<!-- See https://stackoverflow.com/questions/1865837/whats-the-difference-between-window-location-and-window-location-replace — we use .replace() because we don't want the old url to appear in the browser history. --><script>
  if (!/(\/|html?)$/.test(window.location.href)){
    window.location.replace(window.location.href + '/');
  }
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">mpathsenser</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.2.4.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="articles/mpathsenser.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/data-overview.html">Data overview</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://cloud.r-project.org/package=mpathsenser" aria-label="View on CRAN"><span class="fa fab fa-r-project"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/koenniem/mpathsenser" aria-label="Github"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="mpathsenser-">mpathsenser 
<a class="anchor" aria-label="anchor" href="#mpathsenser-"></a>
</h1>
</div>
<!-- badges: start -->

<div class="section level2">
<h2 id="installing-the-package">Installing the package<a class="anchor" aria-label="anchor" href="#installing-the-package"></a>
</h2>
<p>You can install the latest version of mpathsenser from CRAN:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"mpathsenser"</span><span class="op">)</span></span></code></pre></div>
<p>Or the development version from Github:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"koenniem/mpathsenser"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="importing-files">Importing files<a class="anchor" aria-label="anchor" href="#importing-files"></a>
</h2>
<p>Specify a path variable to wherever you put the JSON files. Make sure to use <code>/</code> and not a backslash.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">path</span> <span class="op">&lt;-</span> <span class="st">"~/Mobile Sensing Study/Data"</span></span></code></pre></div>
<p>If you haven’t done so, unzip all files.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/unzip_data.html">unzip_data</a></span><span class="op">(</span>path <span class="op">=</span> <span class="va">path</span><span class="op">)</span></span>
<span><span class="co">#&gt; Unzipped 37 files.</span></span></code></pre></div>
<p>In m-Path Sense, data is written to JSON files as it comes in. In the JSON file format, every file starts with <code>[</code> and ends with <code>]</code>. If the app is killed, JSON files may not be properly closed and hence cannot be read by JSON parsers. So, we must first test if all files are in a valid JSON format and fix those that are not.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Test JSONs for problems. Output is a character vector containing bad files (if any).</span></span>
<span><span class="va">to_fix</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/test_jsons.html">test_jsons</a></span><span class="op">(</span>path <span class="op">=</span> <span class="va">path</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: There were issues in some files</span></span>
<span></span>
<span><span class="co"># Fix JSON files if there are any.</span></span>
<span><span class="co"># Note that test_jsons() returns the full path names, so a path directory is not necessary.</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">to_fix</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="reference/fix_jsons.html">fix_jsons</a></span><span class="op">(</span>path <span class="op">=</span> <span class="cn">NULL</span>, files <span class="op">=</span> <span class="va">to_fix</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; Fixed 12 files</span></span></code></pre></div>
<p>To import data, first create a database.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">db</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/create_db.html">create_db</a></span><span class="op">(</span>path <span class="op">=</span> <span class="va">path</span>, db_name <span class="op">=</span> <span class="st">"some_db.db"</span><span class="op">)</span></span></code></pre></div>
<p>Then, call <code><a href="reference/import.html">import()</a></code> to start reading in the files.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/import.html">import</a></span><span class="op">(</span>path <span class="op">=</span> <span class="va">path</span>, db <span class="op">=</span> <span class="va">db</span>, .progress <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; All files were successfully written to the database.</span></span></code></pre></div>
<p>If everything went correctly, there should be a message that all files were successfully written to the database. Otherwise <code><a href="reference/import.html">import()</a></code> return a character vector containing the files that failed to be imported. Note that files only need to be imported once, and that new files can be added to the database by calling <code><a href="reference/import.html">import()</a></code> again using the same database. Files that were processed previously will be skipped.</p>
</div>
<div class="section level2">
<h2 id="extracting-data-from-the-database">Extracting data from the database<a class="anchor" aria-label="anchor" href="#extracting-data-from-the-database"></a>
</h2>
<p>Once files are imported, you can establish a database connection with <code><a href="reference/open_db.html">open_db()</a></code>. Don’t forget to save it to a variable!</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">db</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/open_db.html">open_db</a></span><span class="op">(</span></span>
<span>  path <span class="op">=</span> <span class="va">path</span>, </span>
<span>  db_name <span class="op">=</span> <span class="st">"some_db.db"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>To find out which participants are in the database (or rather their participant numbers):</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/get_participants.html">get_participants</a></span><span class="op">(</span><span class="va">db</span><span class="op">)</span></span>
<span><span class="co">#&gt;   participant_id     study_id</span></span>
<span><span class="co">#&gt; 1           2784 Study_Merijn</span></span>
<span><span class="co">#&gt; 2            N/A           -1</span></span></code></pre></div>
<p>We can also check what device they are using (which can be found in the Device table of the database).</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/device_info.html">device_info</a></span><span class="op">(</span>db <span class="op">=</span> <span class="va">db</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 10</span></span>
<span><span class="co">#&gt;   participant_id device_id    hardware device_name device_manufacturer device_model operating_system</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;          &lt;chr&gt;        &lt;chr&gt;    &lt;chr&gt;       &lt;chr&gt;               &lt;chr&gt;        &lt;chr&gt;           </span></span>
<span><span class="co">#&gt; 1 2784           SP1A.210812… qcom     r8q         samsung             SM-G780G     REL             </span></span>
<span><span class="co">#&gt; # ℹ 3 more variables: platform &lt;chr&gt;, operating_system_version &lt;chr&gt;, sdk &lt;chr&gt;</span></span></code></pre></div>
<p>To find out how much data there is in this database, look at the number of rows as an indication. Note that this operation may be slow for large databases, as every tables in the database needs to be queried.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/get_nrows.html">get_nrows</a></span><span class="op">(</span><span class="va">db</span><span class="op">)</span></span>
<span><span class="co">#&gt;         Accelerometer              Activity            AirQuality              AppUsage </span></span>
<span><span class="co">#&gt;                 48352                     2                     0                   386 </span></span>
<span><span class="co">#&gt;               Battery             Bluetooth              Calendar          Connectivity </span></span>
<span><span class="co">#&gt;                     0                  1103                    98                    35 </span></span>
<span><span class="co">#&gt;                Device                 Error   GarminAccelerometer      GarminActigraphy </span></span>
<span><span class="co">#&gt;                    12                     1                     0                     0 </span></span>
<span><span class="co">#&gt;             GarminBBI     GarminEnhancedBBI       GarminGyroscope       GarminHeartRate </span></span>
<span><span class="co">#&gt;                     0                     0                     0                     0 </span></span>
<span><span class="co">#&gt;            GarminMeta     GarminRespiration GarminSkinTemperature            GarminSPO2 </span></span>
<span><span class="co">#&gt;                     0                     0                     0                     0 </span></span>
<span><span class="co">#&gt;           GarminSteps          GarminStress     GarminWristStatus    GarminZeroCrossing </span></span>
<span><span class="co">#&gt;                     0                     0                     0                     0 </span></span>
<span><span class="co">#&gt;              Geofence             Gyroscope             Heartbeat         InstalledApps </span></span>
<span><span class="co">#&gt;                     0                 18542                     0                  1224 </span></span>
<span><span class="co">#&gt;              Keyboard                 Light              Location                Memory </span></span>
<span><span class="co">#&gt;                     0                   538                    37                    84 </span></span>
<span><span class="co">#&gt;              Mobility                 Noise             Pedometer              PhoneLog </span></span>
<span><span class="co">#&gt;                     0                     0                  2511                     0 </span></span>
<span><span class="co">#&gt;                Screen           TextMessage              Timezone               Weather </span></span>
<span><span class="co">#&gt;                   332                     0                     0                    35 </span></span>
<span><span class="co">#&gt;                  Wifi </span></span>
<span><span class="co">#&gt;                    84</span></span></code></pre></div>
<p>Now let’s find out how to actually retrieve data from the database. There is a simple function for this, which is called <code><a href="reference/get_data.html">get_data()</a></code>. With this function you can extract any kind of data you want. Make sure you also run <code><a href="reference/get_data.html">?get_data</a></code> for an overview of how to use this (or any other) function. In most functions, you can also leave arguments empty to retrieve all data (e.g. not in a specific time window).</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/get_data.html">get_data</a></span><span class="op">(</span></span>
<span>  db <span class="op">=</span> <span class="va">db</span>, <span class="co"># the ACTIVE database connection, open with open_db AND save to a variable</span></span>
<span>  sensor <span class="op">=</span> <span class="st">"Pedometer"</span>, <span class="co"># A sensor name, see mpathsenser::sensors for the full list</span></span>
<span>  participant_id <span class="op">=</span> <span class="st">"2784"</span>, <span class="co"># A participant ID, see get_participants</span></span>
<span>  start_date <span class="op">=</span> <span class="st">"2022-06-14"</span>, <span class="co"># An optional start date, in the format YYYY-MM-DD</span></span>
<span>  end_date <span class="op">=</span> <span class="st">"2022-06-15"</span> <span class="co"># An optional end date, in the format YYYY-MM-DD</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; # Source:   SQL [?? x 5]</span></span>
<span><span class="co">#&gt; # Database: sqlite 3.51.0 [C:\Users\u0134047\AppData\Local\Temp\RtmpIrwLkU\readme\some_db.db]</span></span>
<span><span class="co">#&gt;   measurement_id                       participant_id date       time     step_count</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;                                &lt;chr&gt;          &lt;chr&gt;      &lt;chr&gt;         &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1 fd1a1310-ebc2-11ec-9b71-3ba318669196 2784           2022-06-14 09:18:44     118532</span></span>
<span><span class="co">#&gt; 2 d1847900-ebc4-11ec-879d-b5caf642e57d 2784           2022-06-14 09:31:50     118540</span></span>
<span><span class="co">#&gt; 3 e6214460-ebc4-11ec-a49f-29d5cd426d5e 2784           2022-06-14 09:32:24     118546</span></span>
<span><span class="co">#&gt; 4 e6982210-ebc4-11ec-adf0-bd5a8a64c663 2784           2022-06-14 09:32:25     118547</span></span>
<span><span class="co">#&gt; 5 e70c1990-ebc4-11ec-b4e1-7bbba2cce9b4 2784           2022-06-14 09:32:26     118548</span></span>
<span><span class="co">#&gt; # ℹ more rows</span></span></code></pre></div>
<p>A more comprehensive guide is provided in the <a href="https://ppw-okpiv.pages.gitlab.kuleuven.be/researchers/u0134047/mpathsenser/articles/mpathsenser.html" class="external-link">Get Started vignette</a>.</p>
</div>
<div class="section level2">
<h2 id="reference">Reference<a class="anchor" aria-label="anchor" href="#reference"></a>
</h2>
<p>For an overview of all functions in this package, see the <a href="https://ppw-okpiv.pages.gitlab.kuleuven.be/researchers/u0134047/mpathsenser/reference/index.html" class="external-link">mpathsenser Reference Site</a>. The database schema used in this package can be found <a href="https://gitlab.kuleuven.be/ppw-okpiv/researchers/u0134047/mpathsenser/-/blob/master/inst/extdata/mpathsenser_db.png" class="external-link">here</a>.</p>
</div>
<div class="section level2">
<h2 id="getting-help">Getting help<a class="anchor" aria-label="anchor" href="#getting-help"></a>
</h2>
<p>If you encounter a clear bug or need help getting a function to run, please file an issue with a minimal reproducible example on <a href="https://gitlab.kuleuven.be/ppw-okpiv/researchers/u0134047/mpathsenser/-/issues" class="external-link">Gitlab</a>.</p>
</div>
<div class="section level2">
<h2 id="code-of-conduct">Code of Conduct<a class="anchor" aria-label="anchor" href="#code-of-conduct"></a>
</h2>
<p>Please note that this project is released with a <a href="https://ppw-okpiv.pages.gitlab.kuleuven.be/researchers/u0134047/mpathsenser/CODE_OF_CONDUCT.html" class="external-link">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=mpathsenser" class="external-link">View on CRAN</a></li>
<li><a href="https://koenniem.github.io/mpathsenser">Browse source code</a></li>
<li><a href="https://github.com/koenniem/mpathsenser/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing mpathsenser</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://ppw.kuleuven.be/okp/team/Koen_Niemeijer/" class="external-link">Koen Niemeijer</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-0816-534X" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>KU Leuven <br><small class="roles"> Copyright holder, funder </small>   </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=mpathsenser" class="external-link"><img src="https://www.r-pkg.org/badges/version/mpathsenser" alt="CRAN status"></a></li>
<li><a href="https://www.repostatus.org/#active" class="external-link"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable state and is being actively developed."></a></li>
<li><a href="https://github.com/koenniem/mpathsenser/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/koenniem/mpathsenser/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/koenniem/mpathsenser" class="external-link"><img src="https://codecov.io/gh/koenniem/mpathsenser/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://ppw.kuleuven.be/okp/team/Koen_Niemeijer/" class="external-link">Koen Niemeijer</a>, KU Leuven.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
